// Aaron Korpa
// ASDI 1401
// Project 2

var remoteResponse, remoteError, json, title1, author1;

var post1 = {
	title: "",
	author: "",
	announce : function () {
		return "The title of this post is " + this.title + ". The author of this post is " + this.author + ".";
	}
};

var remoteResponse = function(){
	Ti.API.debug(this.responseText);
	json = JSON.parse(this.responseText);
	
	title1 = json.data.children[0].data.title;
	author1 = json.data.children[0].data.author;
			
	Ti.API.debug(title1);
	Ti.API.debug(author1);
	
	post1.title = title1;
	post1.author = author1;
};

var remoteError = function(e){
	Ti.API.debug("Status: " + this.status);
	TI.API.debug("Text: " + this.responseText);
	TI.API.debug("Error: " + e.error);
	alert("There is a problem pulling remote data");
};

var xhr = Ti.Network.createHTTPClient({
	onload: remoteResponse,
	onError: remoteError,
	timeout: 5000
});



xhr.open("GET", "http:api.reddit.com/");
xhr.send();

var allData = [post1];
remoteResponse();
exports.remote_data = allData;