// Aaron Korpa
// ASDI 1401
// Project 3

submitButton.addEventListener("click", function(e){
	
	//Make sure required fields are entered, else error.
	if (lastName.value == "" && firstName.value == "") {
		alert("First Name is a required field.");
	} else if (lastName.value == "") {
		alert("Last Name is a required field");
	} else if (firstName.value == "") {
		alert("First Name and Last Name are required fields.");
	} else {
		var userInput = {};

		
		userInput.first_name = firstName.value;
		userInput.last_name = lastName.value;
		if (phoneNumber.value == "") {
			phoneNumber.value = "No Phone";
			userInput.phone_number = phoneNumber.value;
		} else {
			userInput.phone_number = phoneNumber.value;
		}
		
		var saveData = escape(JSON.stringify(userInput));
		
		//Set that data, and sanitize with parameterization
		db.execute("INSERT INTO users (user) VALUES(?)", saveData);
		
		//Clear input fields upon success
		firstName.value = "";
		lastName.value = "";
		phoneNumber.value = "";
		
		//Drop Keyboard
		firstName.blur();
		lastName.blur();
		phoneNumber.blur();
		
		data = rows.rows();
		tableView.setData(data);
		
		//let the user know it has been saved
		alert("Your data has been saved!"); //was (saveData + "string")
	}
});